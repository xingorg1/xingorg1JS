# JS API

## grid【测试时，getter没有作用呢】
> Getter/setter for the grid attribute on the element.

getter/setter 元素上边的grid attr属性

要注意的是，grid值可以在两个地方设置：
一个是css-doodle标签上、一个是:doodle选择器里的@grid属性上

但是@grid的选择器优先级要于Attributes的grid值。

所以有时候重新设置了grid的值，可能也不会对最终的网格数产生影响。

## use
> Getter/setter for the use attribute on the element.

修改或设置元素的 use 属性值。

## seed
> Getter/setter for the seed attribute on the element.

修改或设置元素的 use 属性值。

## update(styles)
> Re-render the component (with given styles).

重新渲染组件（用给定的样式）。

感觉属性`click-to-update`就是内部用了这个方法？

## export([options])

将css-doodle元素当做图片导出。返回一个Promise对象，这个对象包含导出图片的所有信息。

### Options
参数| 数据类型|含义|默认值
-|-|-|-
scale| Integer | 导出图像的缩放比例|  1
detail | Boolean | 是否返回图片详细的信息。比如：blob size等| false
download | Boolean | 是否下载图片。| false
name | String | 下载图片时的名字|  当前时间戳
作者实现图片下载面临的问题：
> Screenshot at client side has always been a hard problem if it's not SVG or canvas. Unfortunately, the most commonly used [html2canvas](https://github.com/niklasvh/html2canvas) does not work well for Web Components. For a long time I thought using a command line tool with [Puppeteer](https://github.com/puppeteer/puppeteer) was the best solution I could find.

实现原理：

这篇文章里作者有聊到https://yuanchuan.dev/whats-new-in-css-doodle

主要是利用了[SVG &lt;foreignObject> ](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject)。具体如下：
> The SVG <foreignObject> can embed HTML inside it to make the whole thing a valid SVG. So I put everything of Shadow DOM generated by css-doodle into <foreignObject>, and then using canvas to get the SVG image data. Problem sovled!

增加宽度和高度将获得较大尺寸的图像

> Thanks to SVG, keep viewBox to the actual element size, increase the width and height will get large dimensions of the image. That's extremely useful for print purpose.